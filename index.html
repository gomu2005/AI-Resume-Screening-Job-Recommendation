
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Resume Screening & Job Recommendation (HTML/CSS/JS)</title>

  <!-- PDF.js (for client-side PDF parsing) -->
  <script src="https://unpkg.com/pdfjs-dist@3.6.172/build/pdf.min.js"></script>

  <style>
    :root{
      --accent:#0ea5a2;
      --muted:#6b7280;
      --card:#ffffff;
      --bg:#f3f4f6;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    body{ margin:0; background:var(--bg); color:#111827; }
    header{ background:var(--accent); color:#fff; padding:20px 24px; }
    header h1{ margin:0; font-size:20px; letter-spacing:0.2px; }
    .container{ max-width:1000px; margin:28px auto; padding:0 20px;}
    .card{ background:var(--card); border-radius:10px; padding:18px; box-shadow:0 6px 18px rgba(15,23,42,0.06); }
    .row{ display:flex; gap:18px; align-items:flex-start; }
    .col{ flex:1; }
    .left { max-width:360px; }
    label.upload{
      display:block; background:#fff; padding:10px; border-radius:8px; border:1px dashed #d1d5db; cursor:pointer;
      text-align:center; transition: all .12s ease;
    }
    label.upload:hover{ transform:translateY(-2px); box-shadow:0 6px 20px rgba(2,6,23,0.06);}
    input[type=file]{ display:none; }
    button { background:var(--accent); color:#fff; border:0; padding:10px 14px; border-radius:8px; cursor:pointer; }
    .small { font-size:13px; color:var(--muted); margin-top:8px; }
    pre.parsed { white-space:pre-wrap; max-height:200px; overflow:auto; margin-top:12px; padding:12px; background:#f8fafc; border-radius:8px; border:1px solid #eef2f7; }
    ul.jobs { list-style:none; padding:0; margin:0; }
    li.job { border:1px solid #e6e9ef; padding:12px; border-radius:8px; margin-bottom:10px; display:flex; justify-content:space-between; gap:12px; background:#fff;}
    .badge{ font-size:12px; color:#065f46; background:#ecfdf5; padding:6px 8px; border-radius:999px; }
    .score{ font-weight:700; font-size:18px; color:#111827; }
    .keywords { margin-top:8px; font-size:13px; color:var(--muted); }
    mark { background: #fff59d; padding:0 4px; border-radius:4px; }
    footer { text-align:center; color:var(--muted); padding:24px 0; }
    .controls { display:flex; gap:8px; margin-top:12px; flex-wrap:wrap; }
    .info { font-size:13px; color:var(--muted); margin-top:8px; }
    @media (max-width:820px){ .row{ flex-direction:column; } .left{ max-width:none; } }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1>AI Resume Screening & Job Recommendation — Demo (HTML / CSS / JS)</h1>
    </div>
  </header>

  <main class="container" style="margin-top:18px;">
    <div class="row">
      <div class="card left">
        <h3>Upload Resume</h3>
        <label class="upload" title="Upload PDF or TXT">
          <input id="resumeFile" type="file" accept=".pdf,.txt" />
          Click to choose a PDF or TXT resume
          <div class="small">Supported: <strong>PDF</strong> and <strong>TXT</strong>. (DOCX not supported in this demo.)</div>
        </label>

        <div class="controls">
          <button id="analyzeBtn">Analyze & Recommend</button>
          <button id="seedBtn" title="Load example jobs">Load sample jobs</button>
          <button id="clearBtn" title="Clear results">Clear</button>
        </div>

        <div class="info">
          <div id="status">No resume yet.</div>
        </div>

        <div id="parsedWrap" style="margin-top:12px; display:none;">
          <h4>Parsed Resume Text</h4>
          <pre id="parsedText" class="parsed"></pre>
        </div>
      </div>

      <div class="card col">
        <h3>Recommended Jobs</h3>
        <div class="small">Top matches are shown with a TF–IDF cosine similarity score (0–1). Higher is better.</div>

        <div style="margin-top:12px;">
          <ul id="jobsList" class="jobs"></ul>
        </div>
      </div>
    </div>

    <div style="height:18px;"></div>

    <div class="card">
      <h4>Job Bank (static)</h4>
      <div class="small">You can edit the static jobs in the JS list (for demo). Use "Load sample jobs" to reset.</div>
      <div id="jobsRaw" style="margin-top:10px; font-family:monospace; font-size:13px; color:var(--muted); max-height:120px; overflow:auto; background:#f8fafc; padding:10px; border-radius:8px;"></div>
    </div>
  </main>

  <footer>
    Built with plain HTML/CSS/JS • Demo TF–IDF recommender • For stronger results, add embeddings (OpenAI / SBERT).  
  </footer>

<script>
/* ====== Simple TF-IDF cosine similarity recommender (client-side) ======
   - Uses pdf.js to extract PDF text (client-side)
   - Tokenizes, builds tf-idf vectors and computes cosine similarity
   - Static job list (can be edited)
*/

/* --------- Job data (static) --------- */
let JOBS = [
  { id:1, title:'Frontend Developer', company:'Acme', location:'Remote', description:'React, JavaScript, HTML, CSS, responsive design, REST APIs', tags:['react','javascript','frontend'] },
  { id:2, title:'Backend Developer (Node.js)', company:'Beta', location:'Bangalore', description:'Node.js, Express, MongoDB, API design, authentication', tags:['node','backend','api'] },
  { id:3, title:'Data Scientist - NLP', company:'Gamma', location:'Hyderabad', description:'Python, NLP, transformers, machine learning, pandas, scikit-learn', tags:['python','nlp','ml'] },
  { id:4, title:'DevOps Engineer', company:'OpsCo', location:'Chennai', description:'Kubernetes, Docker, CI/CD, monitoring, AWS', tags:['kubernetes','devops'] },
  { id:5, title:'Full Stack Developer', company:'StackInc', location:'Mumbai', description:'React, Node.js, MongoDB, cloud deployment', tags:['fullstack'] },
  { id:6, title:'UI/UX Designer', company:'DesignLab', location:'Remote', description:'Figma, user research, prototyping, accessibility', tags:['design','ux'] },
];

/* --------- Utilities: text extraction --------- */
const pdfjsLib = window['pdfjs-dist/build/pdf'];
pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://unpkg.com/pdfjs-dist@3.6.172/build/pdf.worker.min.js';

const fileInput = document.getElementById('resumeFile');
const analyzeBtn = document.getElementById('analyzeBtn');
const seedBtn = document.getElementById('seedBtn');
const clearBtn = document.getElementById('clearBtn');
const status = document.getElementById('status');
const parsedTextEl = document.getElementById('parsedText');
const parsedWrap = document.getElementById('parsedWrap');
const jobsList = document.getElementById('jobsList');
const jobsRaw = document.getElementById('jobsRaw');

let uploadedText = '';

function showJobsRaw(){
  jobsRaw.textContent = JSON.stringify(JOBS, null, 2);
}
showJobsRaw();

/* Read file (pdf or txt) */
async function parseFile(file){
  const name = file.name.toLowerCase();
  if (name.endsWith('.pdf')) {
    // PDF parsing with pdf.js
    const arrayBuffer = await file.arrayBuffer();
    const loadingTask = pdfjsLib.getDocument({data: arrayBuffer});
    const pdf = await loadingTask.promise;
    let fullText = '';
    for (let i=1; i<=pdf.numPages; i++){
      const page = await pdf.getPage(i);
      const content = await page.getTextContent();
      const strings = content.items.map(it => it.str);
      fullText += strings.join(' ') + '\n\n';
    }
    return fullText;
  } else if (name.endsWith('.txt')) {
    return await file.text();
  } else {
    throw new Error('Unsupported file type. Use PDF or TXT for this demo.');
  }
}

/* --------- Basic tokenization and TF-IDF functions --------- */
function tokenize(text){
  // lowercase, remove punctuation (basic), split by whitespace
  return text
    .toLowerCase()
    .replace(/[^\w\s]/g, ' ')
    .split(/\s+/)
    .filter(Boolean)
    .map(t => t.trim());
}

function buildTf(docTokens){
  const tf = {};
  const n = docTokens.length;
  docTokens.forEach(tok=>{
    tf[tok] = (tf[tok] || 0) + 1;
  });
  // convert to term frequency (raw count or normalized)
  Object.keys(tf).forEach(k => tf[k] = tf[k] / n);
  return tf;
}

function buildIdf(docTokensArray){
  // docTokensArray: array of token arrays
  const N = docTokensArray.length;
  const df = {};
  docTokensArray.forEach(tokens=>{
    const seen = {};
    tokens.forEach(t => { if (!seen[t]) { df[t] = (df[t]||0) + 1; seen[t]=true; }});
  });
  const idf = {};
  Object.keys(df).forEach(term => {
    idf[term] = Math.log((N + 1) / (df[term] + 1)) + 1; // smooth
  });
  return idf;
}

function tfidfVector(tf, idf, vocab){
  const v = {};
  vocab.forEach(term => {
    const tfVal = tf[term] || 0;
    const idfVal = idf[term] || 0;
    v[term] = tfVal * idfVal;
  });
  return v;
}

function cosineSim(vecA, vecB){
  let dot = 0, magA = 0, magB = 0;
  const keys = Object.keys(vecA);
  for (let k of keys){
    const a = vecA[k] || 0;
    const b = vecB[k] || 0;
    dot += a*b;
    magA += a*a;
    magB += b*b;
  }
  magA = Math.sqrt(magA);
  magB = Math.sqrt(magB);
  if (magA === 0 || magB === 0) return 0;
  return dot / (magA * magB);
}

/* --------- Main recommender function --------- */
function recommend(resumeText, jobs, topK=10){
  // Build documents: resume + jobs (title + description)
  const docs = [];
  const resumeTokens = tokenize(resumeText);
  docs.push(resumeTokens);
  const jobDocs = jobs.map(j => tokenize((j.title || '') + ' ' + (j.description || '') + ' ' + (j.tags || []).join(' ')));
  jobDocs.forEach(jt => docs.push(jt));

  // Build vocab (all unique terms)
  const vocabSet = {};
  docs.forEach(tokens => tokens.forEach(t => vocabSet[t]=true));
  const vocab = Object.keys(vocabSet);

  // Build tf for each doc, idf global
  const tfs = docs.map(tokens => buildTf(tokens));
  const idf = buildIdf(docs);

  const vectors = tfs.map(tf => tfidfVector(tf, idf, vocab));

  const resumeVec = vectors[0];
  const scores = [];
  for (let i=0; i<jobs.length; i++){
    const jobVec = vectors[i+1];
    const score = cosineSim(resumeVec, jobVec);
    scores.push({ job: jobs[i], score });
  }
  scores.sort((a,b)=> b.score - a.score);
  return scores.slice(0, topK);
}

/* --------- UI rendering --------- */
function renderRecommendations(results, resumeText){
  jobsList.innerHTML = '';
  if (!results.length) {
    jobsList.innerHTML = '<li class="small">No jobs available.</li>';
    return;
  }
  results.forEach(res => {
    const j = res.job;
    const score = res.score;
    // Find top overlapping keywords for display (simple)
    const resumeTokens = new Set(tokenize(resumeText));
    const jobTokens = new Set(tokenize(j.title + ' ' + j.description + ' ' + (j.tags||[]).join(' ')));
    const overlap = [];
    for (let t of jobTokens){
      if (resumeTokens.has(t) && overlap.length < 8) overlap.push(t);
    }

    const li = document.createElement('li');
    li.className = 'job';
    li.innerHTML = `
      <div style="flex:1;">
        <div style="display:flex;align-items:center;gap:8px;margin-bottom:6px;">
          <div style="font-weight:700">${escapeHtml(j.title)}</div>
          <div style="color:var(--muted);font-size:13px;"> — ${escapeHtml(j.company)}</div>
          <div style="margin-left:8px;"><span class="badge">${escapeHtml(j.location||'')}</span></div>
        </div>
        <div style="color:var(--muted);font-size:13px;">${escapeHtml(j.description)}</div>
        <div class="keywords">${overlap.map(k=>`<mark>${escapeHtml(k)}</mark>`).join(' ')}</div>
      </div>
      <div style="width:110px; text-align:right;">
        <div class="score">${(score).toFixed(2)}</div>
        <div class="small" style="color:var(--muted)">match score</div>
      </div>
    `;
    jobsList.appendChild(li);
  });
}

/* helper */
function escapeHtml(s){ return (s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

/* --------- Event handlers --------- */
fileInput.addEventListener('change', async (e) => {
  const file = e.target.files[0];
  if (!file) return;
  status.textContent = `Parsing ${file.name} ...`;
  try {
    uploadedText = await parseFile(file);
    parsedWrap.style.display = 'block';
    parsedTextEl.textContent = uploadedText.slice(0, 20000); // cap display
    status.textContent = `Parsed ${file.name}. Ready to analyze.`;
  } catch (err) {
    status.textContent = 'Failed to parse: ' + err.message;
    parsedWrap.style.display = 'none';
    uploadedText = '';
  }
});

analyzeBtn.addEventListener('click', () => {
  if (!uploadedText) {
    alert('Please upload a PDF or TXT resume first.');
    return;
  }
  status.textContent = 'Analyzing and matching...';
  // Run recommender
  const results = recommend(uploadedText, JOBS, 10);
  renderRecommendations(results, uploadedText);
  status.textContent = `Analysis complete — showing ${results.length} matches.`;
});

seedBtn.addEventListener('click', () => {
  // Reset sample jobs (re-seed)
  JOBS = [
    { id:1, title:'Frontend Developer', company:'Acme', location:'Remote', description:'React, JavaScript, HTML, CSS, responsive design, REST APIs', tags:['react','javascript','frontend'] },
    { id:2, title:'Backend Developer (Node.js)', company:'Beta', location:'Bangalore', description:'Node.js, Express, MongoDB, API design, authentication', tags:['node','backend','api'] },
    { id:3, title:'Data Scientist - NLP', company:'Gamma', location:'Hyderabad', description:'Python, NLP, transformers, machine learning, pandas, scikit-learn', tags:['python','nlp','ml'] },
    { id:4, title:'DevOps Engineer', company:'OpsCo', location:'Chennai', description:'Kubernetes, Docker, CI/CD, monitoring, AWS', tags:['kubernetes','devops'] },
    { id:5, title:'Full Stack Developer', company:'StackInc', location:'Mumbai', description:'React, Node.js, MongoDB, cloud deployment', tags:['fullstack'] },
    { id:6, title:'UI/UX Designer', company:'DesignLab', location:'Remote', description:'Figma, user research, prototyping, accessibility', tags:['design','ux'] }
  ];
  showJobsRaw();
  status.textContent = 'Loaded sample jobs.';
  jobsList.innerHTML = '';
});

clearBtn.addEventListener('click', () => {
  uploadedText = '';
  parsedTextEl.textContent = '';
  parsedWrap.style.display = 'none';
  fileInput.value = '';
  jobsList.innerHTML = '';
  status.textContent = 'Cleared.';
});

/* initialize showing jobs */
showJobsRaw();

</script>
</body>
</html>
